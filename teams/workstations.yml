# Teams are available in Fleet Premium. 

# This file updates policies, queries, agent options, controls, and software for hosts assigned to the "Workstations" team.

# To add another team, create a new file in the teams/ directory and copy and paste the contents from this file.
# Update the secret in the new file, then create the corresponding secret in GitHub Actions secrets. 
# Then add that secret to .github/workflows/workflow.yml as an env variable.
# The secret name in the YAML file must match the secret name in GitHub Actions secrets.

name: Workstations
policies:
  - path: ../lib/macos-device-health.policies.yml
  - path: ../lib/windows-device-health.policies.yml
  - path: ../lib/linux-device-health.policies.yml
queries:
  - path: ../lib/collect-usb-devices.queries.yml
  - path: ../lib/collect-failed-login-attempts.queries.yml
agent_options:
  path: ../lib/agent-options.yml
controls:
  scripts:
    - path: ../lib/remove-zoom-artifacts.script.sh
    - path: ../lib/set-timezone.script.sh
team_settings:
  secrets:
    - secret: "$FLEET_WORKSTATIONS_ENROLL_SECRET"
software:
  packages:
    - hash_sha256: b70c30c2491094702c2cd3f432781884868d1078b02dfa423e19c3c958271638 #Team Viewer (TeamViewer.pkg) version 15.66.6
      url: https://dl.teamviewer.com/download/version_15x/update/15.66.6/TeamViewer.pkg
    - hash_sha256: 62780f858b28ae3b7f3fa412b035f4bfdb77fc099f88db81b87d1aca47cced74 # Clipy (Clipy_1.2.1.pkg) version 1.2.1
      pre_install_query:
        path: ../lib/queries/pre-install-query-clipy.yml
      install_script:
        path: ../lib/scripts/install-clipy.sh
      post_install_script:
        path: ../lib/scripts/post-install-clipy.sh
      uninstall_script:
        path: ../lib/scripts/uninstall-clipy.sh
    - path: ../lib/packages/box.yml
    - path: ../lib/packages/clipy.yml
    - path: ../lib/packages/company-portal.yml
    - path: ../lib/packages/santa.yml
    - path: ../lib/packages/trial.yml
  app_store_apps:
    - app_store_id: '803453959' # Slack Desktop
      self_service: true
      categories:
        - Productivity
        - Communication
  fleet_maintained_apps:
    - slug: visual-studio-code/windows
      self_service: true
      categories:
        - Productivity
    - slug: google-chrome/darwin
      self_service: true
    - slug: google-chrome/windows
      self_service: true
